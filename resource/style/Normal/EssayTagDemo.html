<html>
<head>
    <meta charset="utf-8">
    <link href="../../common/common.css" rel="stylesheet"/>
    <link href="EssayTag.css" rel="stylesheet"/>
    <script src="http://lib.sinaapp.com/js/jquery/3.1.0/jquery-3.1.0.min.js"></script>
    <title>试卷题目</title>
    <style>
        .editor{
            display: none;
            position: relative;
            top:1em;
            width: 90%;
            min-height: 10em;
            max-height: 30em;
            resize:vertical;
        }
    </style>
</head>

<body>

<div id="qus_1" class="topic Essay">
    <div class="question">
        1.中华人民共和国成立于哪年？
        [<span class="showAnswer">显示答案</span>]
    </div>
    <div class="operator canWrite"></div>
    <textarea class="editor"></textarea>
    <input class="answer" type="hidden" value="1949"/>
</div>
<script>
    var qus_1 = $("#qus_1");
    var qus_1_operator = qus_1.find(".operator");
    var qus_1_showAnswerBtn = qus_1.find(".showAnswer");
    var qus_1_answer = qus_1.find(".answer").val();
    var qus_1_editor = qus_1.find(".editor");
    var enterTimes = 0;
    qus_1_operator.on("click",function(e){
        if(qus_1_operator.hasClass("on")){
            qus_1_operator.text("");
            qus_1_operator.removeClass("on")
        }
        qus_1_operator.hide();
        qus_1_editor.show();
        qus_1_editor.focus();
    });
    qus_1_showAnswerBtn.on("click",function(e){
        qus_1_operator.text(qus_1_answer);
        qus_1_operator.addClass("on");
    });
    qus_1_editor.on("keypress",function(e){
        if(event.keyCode === 13) {
            enterTimes++;
            if(enterTimes>1){
                enterTimes = 0;
                qus_1_editor.hide();
                qus_1_operator.text(qus_1_editor.val());
                qus_1_operator.show();
            }
        }
    });
    qus_1_editor.on("blur",function(e){
        qus_1_editor.hide();
        qus_1_operator.text(qus_1_editor.val());
        qus_1_operator.show();
    })

</script>

</body>

</html>